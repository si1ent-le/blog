---
title: 加密电梯卡成功复制至米3手环
date: 2019-07-11 12:41:37
---
平时工作、生活中难免会遇到电梯卡、门禁卡等类似RFID卡，但也同样遭遇忘带、丢失等情况；而这次将为您解决这些烦心事.

![](/images/nfc/card.jpg)

<center>哇!好像很强哦!</center>

## 写在前面

小米官方介绍小米手环不支持模拟/复制加密类智能卡.

![](/images/nfc/1.jpg)

如果你不相信那你可以看看下面识别后出现的结果,如下图所示:

![](/images/nfc/2.jpg)

## Tools

1、MifareClassicTool-2.3.1([附上下载链接](http://www.si1ent.xyz/Tools/MifareClassicTool-2.3.1.apk))

2、PN532([附带上机位软件一套](http://www.si1ent.xyz/Tools/PN532_Tools.zip)某宝上搜搜就行)

3、M1 UID白卡一张(随意修改数据,无限修改)

4、加密电梯卡一张

5、手环(米3手环一个)

6、支持NFC功能手机一部

7、附属工具：小米账户+安装好小米运动绑定手环

(备注:加密识别后0扇区内的第一块数据前8位是UID号,后面是厂家信息,想了解更多关于RFID、NFC知识可自行网上找找资料😄)

## 步骤

0、在以上工具准备齐全后开始我们今天的学习吧;

1、支持NFC手机安装MifareClassicTool-2.3.1好软件及准备工作完成;(这部分不进行截图,这里软件是Android类,直接安装即可.)

2、电脑USB连接PN532.驱动程序在压缩包内,安装可参考压缩包内文件.

![](/images/nfc/3.jpg)

<center>图示：PN532运行截图(检测驱动是否安装完成)</center>

3、PN532读取电梯卡内数据(如果电梯卡属于加密类UID卡,那么在每个扇区中第4块内存放密钥,如果属于空卡那么在第4块中的数据应该是: FFFFFFFFFFFFFF078069FFFFFFFFFFFF) 如下图所示.

![](/images/nfc/4.jpg)

<center>图示：空UID卡,电梯卡同样方式读取数据</center>

4、点击左上角三角形保存dump文件,使用notepad++打开并把所有第4扇区内数据修改为FFFFFFFFFFFFFF078069FFFFFFFFFFFF这些.

![](/images/nfc/5.jpg stye="50%")

<center>图示:空UID数据备份,电梯卡同样识别保存</center>

![](/images/nfc/6.jpg)

<center>图示:电梯加密卡每扇区第4块数据显示为密钥</center>

![](/images/nfc/7.jpg)

<center>图示:修改为空的UID卡对比加密卡数据(主要修改每扇区第4块数据为空即可)</center>

5、选择写入UID卡,提示选择待写入的dump文件,这里选择我们把电梯卡内扇区修改为空密码的dump文件,进行写入即可(建议重新读取空白UID内的数据并重新识别UID号是否已经被修改成电梯卡的UID号).

![](/images/nfc/8.jpg)

<center>图示:选择写UID卡</center>

![](/images/nfc/9.jpg)

<center>图示:选择空白电梯卡数据dump文件(关于选择dump文件后面会说明原因)</center>

6、手环模拟空白的UID卡,此时提示已经提示模拟成功;

备注:可以使用软件识别手环的UID是否是电梯卡的UID数据;(这里当时忘记截图了)

7、之前NFC手机安装MifareClassicTool-2.3.1后并不能直接读取电梯卡内数据(只能读取0扇区数据,其他扇区无法读取如下图所示:)

![](/images/nfc/10.jpg)

<center>图示:NFC识别加密电梯卡数据</center>

8、如上图,我们无法获取其他加密扇区数据,so,这才用之前dump出的电梯卡数据(复制dump文件内的16进制的每行前12字符),再在工具MifareClassicTool-2.3.1新建一个keys文件,粘贴加密的dump内的12个字符,点击保存已经生成一个新的keys文件.

推荐工具:[在线去除指定字符数工具](http://www.txttool.com/WenBen_R-.asp)

![](/images/nfc/11.jpg)

<center>图示:点击工具内"编辑/增加加密钥文件",右上角创建新文件</center>

![](/images/nfc/12.jpg)

<center>图示:文件名无所谓</center>

![](/images/nfc/13.jpg)

<center>图示:粘贴加密数据,每行前12字符</center>

![](/images/nfc/14.jpg)

<center>图示:回到主页面再点击"读标签"</center>

![](/images/nfc/15.jpg)

选择keys文件后记得把加密的电梯卡贴到NFC手机,这样就会把所有数据识别到(包括之前1到15扇区无法读取的数据,因为我们之前选择了自己新建的keys文件)

![](/images/nfc/16.jpg)

<center>图示:默认选择所有扇区，然后撤下电梯卡换上手环尝试写入数据.</center>

9、更换手环后不要随意移动手环,提示写入成功,那么手环基本复制完加密电梯卡了.

## 总结

由于电梯卡不是属于本人的,所以部分截图无法一一贴入,帮客户复制到手环的,但是听客户电话说手环成功刷电梯了,内心还是高兴的,毕竟也是大概搞了一周的时间才完成.哎呀,这效率惊人丫！！！

1、为什么要把电梯卡内密钥块删除并拷贝到空UID内?

​	其一:想尝试复制一张非加密的空UID卡,这样电梯卡和空的UID的UID号一致，测试是否可以刷电梯;

​	其二:而且手环本身也要先模拟一张空的UID卡,因此干脆用这个了.

​	结果:空的UID卡不能刷电梯的,尴尬😅

2、原本用PM3去一键解析加密的电梯卡,可惜浪费了很久啊,而且还没解密成功;所以,建议大家直接买个PN532就行了.

3、PN532识别到电梯加密数据、空白UID卡后建议各备份一份dump文件,后期恢复使用.

4、MCT工具新建时粘贴的16进制数据是电梯卡内16个扇区内每块前12字符数据,(如果复制的数据量或长度不对软件会提示报错)

5、MCT新建后记得点击新建keys文件后重新读取电梯卡,并发现除0扇区后其他扇区的所有数据是否补全.

6、补全后点击右上角的"写转储",这时提示所有扇区信息,然后尝试写入即可.

7、写入完后,可以再使用软件读取手环内数据,如果软件识别后1-15扇区的数据显示无法获取key值,那么可以确定手环复制成功.

8、关于智能卡的介绍及知识本人也在学习中,如果想学习了解更多可看下"参考"内的链接.

## 参考

[视屏教程参考](https://www.bilibili.com/video/av33911423/?spm_id_from=333.788.videocard.0ß)

[PM3及相关类型卡介绍](https://www.docin.com/p-2096377705.html)

## 其他方式及流程

0、以上工具除去PN532不用其他均需要

1、删除小米运动手环模拟信息,重新模拟门禁卡;

2、开始检测门禁卡,贴上空白UID卡,提示检测成功;

3、点击开始模拟前,换上我们的电梯卡过去,应该提示模拟成功,输入名称即可.

这个方法本人测试了,但是没有去尝试电梯刷手环测试;所以结果如何还是未知；但是个人觉得不靠谱,因为我们开始模拟的就是非加密类卡,即使后面再模拟,那手环内的数据应该还是空的UID卡内的数据.